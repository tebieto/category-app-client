dist: trusty
sudo: false
language: node_js
node_js:
- '8'
addons:
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
cache:
  directories:
  - "./node_modules"
install:
- npm install
before_script:
- npm update
- npm install -g @angular/cli
- ng build --prod --base-href=/category-app-client/
script:
- npm run test -- --watch=false --no-progress --browsers=ChromeHeadlessNoSandbox
- npm run ci-e2e
after_script:
- cat ./coverage/*/lcov.info | ./node_modules/coveralls/bin/coveralls.js
deploy:
  provider: heroku
  api_key:
    secure: WEnRvVeW7YdenQUTF0nYHanYrVUvHclBJn6T9v5ttQ2Ywn6uMGmb//JL647PJT6TmjhCGxX+mU+ruEd8fHVFRPKW4QEx2WdAmje8zN1f48By+I4XeBCb4L74RQFwrLU2ineWcw34L2OAqNSONr41xlt/HzYNwSWVuFJ/2lTYOE1lXqKjQx7f9Pj4eU12Cjzzye1RGD2QQrJ+x5wUXm3BDpKPt5B4EgkEW2bfjn3rjxFOrpMkHMJza5s8XMHWs2fJ0R/tRhSusZp1GDcffUwXrTnrvIEkeR+/Wpbfka/LOXqU1x1rwUMBkyhEgh5dJ/0i1UcvCpEgumSPHMQP2+s0y/MR8N4HpT6GG0b8fX8BO/iltzikLhkzlB0JedJIB6dmvuiyPXdSqVPX189O+1c+XjAqFk0AhXFH/fcnT8ULoxnwPB04YmOGOoawgwDm+88hPJWO5GArvIij44j4ec4v/xjisEkbtnvH+bXorgfy6hU2RB1K8OfpLIm6TdjuyZ1GdCIdm06mTmoxvGAAwm8TeZ8CNCwLemc2R2HryDsNR6k7nm/UBgf7/doAEaC6KInXGwmy1JiniiCHyEucnnTA6rxRHNvVmnK6WMkMyka4iXE5DEjg+yXrFJ4z09HSZ/vp3cQfBtZtrlyqFlauNClxFzpAYNZYSd0NHeFvSXQ7SWg=
  on:
    all_branches: true
