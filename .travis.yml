dist: trusty
sudo: false
language: node_js
node_js:
- '8'
addons:
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
cache:
  directories:
  - "./node_modules"
install:
- npm install
before_script:
- npm update
- npm install -g @angular/cli
- ng build --prod --base-href=/category-app-client/
script:
- npm run test -- --watch=false --no-progress --browsers=ChromeHeadlessNoSandbox
- npm run ci-e2e
after_script:
- cat ./coverage/*/lcov.info | ./node_modules/coveralls/bin/coveralls.js
deploy:
  provider: heroku
  api_key:
    secure: GVjWp5XAv7MI4NUWnCxG5hn398Mfso63hGlfUzM7fUSgBpjKJ831um6tEBeg3EmcAZHTu0sEKWZ74+DvZMnAkAnm/+VGVZqpzg9le3+mgWMpcLyQqGz9GCAWR0oCil5jleu3OmXorUhYrH+1YzXHOb1ssobemK+9JR8KPxPPZSi77ivPktaBxqtScCMBzsDvHCFvXRGZpxYbUcqSACKLjdvqhgDWXzEESJeNn3P2nLUrAQzfm2gS3z7FDeURkC8Pyhhz1YmPe0fYslq74ifwUfxFW2shMD/+iRfuD4YQLrLVDZHQTp+dBFw5EkBhcp84ZVShw0tCub2TVYvc9kvyhSbE2GxRo9WzFMK2Nc1mqxdw4fjhpIslToXrexIstR5qn2gW1tYlyiO+EHDlAngWdguasMcJ/gu6d/sD2q68duVzxGjzmn+KEprX5R8dt7daU+LYT682ajeeMKUX/2uiMwBd9fQ02ljTolyxmzhBPle5YX/sMsEEytv4r8aD1ggM21rJbLHWAZ/j9g4uC/x1HpC00+7RClzQQVkAQGc743kYFeCnQGxoEbBOW7r/gT0XFPLzz1uL3oTe4hPw1Mnnuf7SS/KmFskg5VeZxRuIPZ9VCXOHLY0LeCEXLRqZzfCHE+hpGA8P9Lq/LcOlKCueNVlxE7FoOnvliV5/SPoe4bU=
  on:
    all_branches: true
