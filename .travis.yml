dist: trusty
sudo: false
language: node_js
node_js:
- '8'
addons:
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
cache:
  directories:
  - "./node_modules"
install:
- npm install
before_script:
- npm update
- npm install -g @angular/cli
- ng build --prod --base-href=/category-app-client/
script:
- npm run test -- --watch=false --no-progress --browsers=ChromeHeadlessNoSandbox
- npm run ci-e2e
after_script:
- cat ./coverage/*/lcov.info | ./node_modules/coveralls/bin/coveralls.js
deploy:
  provider: heroku
  api_key:
    secure: dv4ZM7LmWgBrkhAWXDz2nHAZSQ+DCFeLl+GmWiP4r+PjpwWuojfKNliKrP0ONJeBpzBIePTO757oowFr5cOUlcYP4rnsGpxqr7kQxNryizAmq8umM/ZC42P+woZXwKJSkBvasCl6BD0912KaOSWLKG5SiVg8DKdgFSyPMGbrfwNQhaPVXyEY8pwpzB8e5aPvmxtc9zdVG3taO01QQP7WkLSSuYT/HLMgR4FTqyjQFfFbAm7OUKlvzC4+YXq93YkROt6F+SbpveJKnDmEtgDb53YHNNFKNJ6SSadZn1YDjdhqOJBK66oCZe2J2v1v3W1mDXG9LE9EFeOXmrPqW9jkU5MWAG+6p9c+cAGhbuiP1yUtupr/L1s8U5oe9WIqkk/mGdQWgzGMC8kGWVw2PPy+39BJyH+pTJmcZfBiYe2ghGqn1syJ1MXXY6BjNRXVO0I8sb1NvLN1hBotBon59nlHrCLHAuhP364VUJo1jWLiFZknkBbYEmcdootv8rUA+QYfZwaofnrZX54Nr6aAP4Ob6ZTd2ktt18Vhg6/K3UjkCgWcxIHOBeVic/bSdZx85AslINUsgN/zIZyxJFFCI7blAGa9X2gcPQtJ5kEuuNr8PhXm7xXzpQULrOWJgkSzWnydqMWS33nnAo3kppjabOL2iFkOzmfsrjVFlCJnM7lhJmY=
  on:
    all_branches: true
