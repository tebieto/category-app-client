dist: trusty
sudo: false
language: node_js
node_js:
- '8'
addons:
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
cache:
  directories:
  - "./node_modules"
install:
- npm install
before_script:
- npm update
- npm install -g @angular/cli
- ng build --prod --base-href=/category-app-client/
script:
- npm run test -- --watch=false --no-progress --browsers=ChromeHeadlessNoSandbox
- npm run ci-e2e
after_script:
- cat ./coverage/*/lcov.info | ./node_modules/coveralls/bin/coveralls.js
deploy:
  provider: heroku
  api_key:
    secure: s2h0yUukSHq9QXegdf5pubekEb088ZzPyF4ByZ0zgMCPZ5p9vvWYInGelPJwZZdu71sOmnGX6ADeEJTm3H0z8rvwArQuEPx8IFuSTOBlYeyzjhZleBPmlxBqH+skTUUHpkKBjsPT+ljmzfJLSAE5RVpQ8IVbm6qZeSO2cDB7XCyvr9jJB47eI9Ma7dBiqKziNFRvgzAeEKBRetld/4R8Fs63JC59GFTuhJrI/689hIDH+h6iRVODSyw1EpXtVpA5e4ZpLkri9KXO3wRy1DZzKSk1g1uttnquSW/uwZbmRZz/ur4S8yyI1pabhaRWVpqsgFxknvVCgIP99I2iLiJKpm0c9j2m5X3zHvHAZRmn6O9RoDbpyNBOdNknkX5iUh7vNwqv60n484XWcVcDOlJRVI41Ytb6h97XHg9b0sTGa+NmtktnlOnEGVZZsLUBJqDGS4YHZF7gln2M5Bn0oTyPZLYdpb7GLf8B1fHNUqdlTa5pgWFfLFZcqyAm7zH5fCrk0zXWWrNT+xwKZ1iulRXDhi3PZ5d7Nnii/xnB+fDe0AgCmTwDkfYu0LT1KvE1l/UjR8vVgRTDm3j5+hhAY+DDTC0CZT0DFjt6gKBynGsyq/1ZJkf72v6VL7QJHTnM74/+xQPAUQ5bdqIAvz1SGz9REVaM6gHZkwqlalzA2LUEapE=
  on:
    all_branches: true
