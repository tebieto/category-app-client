dist: trusty
sudo: false
language: node_js
node_js:
- '8'
addons:
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
cache:
  directories:
  - "./node_modules"
install:
- npm install
before_script:
- npm update
- npm install -g @angular/cli
- ng build --prod --base-href=/category-app-client/
script:
- npm run test -- --watch=false --no-progress --browsers=ChromeHeadlessNoSandbox
- npm run ci-e2e
after_script:
- cat ./coverage/*/lcov.info | ./node_modules/coveralls/bin/coveralls.js
deploy:
  provider: heroku
  api_key:
    secure: Tq8wh+sOcCP+Cp9XhpEKFasOoF9sAuXTDJ7eGdfTSxVxNv75LYq2l3oynVIpjdC/s6cwllfzY01nbrH/+wgeE5ABZl6GONZbEWuwb6Od0kwbGUgcFf9LL2CdCdxD03n0Z46jFxbUE+yizUBy3EaVuCkKebP7kYWJ/Cvd/rrKyeTVqQZH9OzPPcrf4PjPbVxSD+aHDwUwDxLedBfAxQeGV3OoQZ5anF5Cp1U70kU/6ChWMQ0lTuIm9cSrkCPtrOpOsuxjP5ZdhG5tQeplxN85kQZUziaIPJaonmupDvkAQd+LrSwtwxgzrXJaOGI5oHdHrKgp0EibcRBkxEse3GXk7m5QXEZmzvB6PHtI8/ua3stEWVa4FoEyeY7GFStHRI0bgZCzN7MzhM2IL5In+RDSsOWaQrskbqcns0eyOeMlY4b6BBluNEGJBYDodFc+j4gkSaNIgK4g+ATnzc9z11dtej6+H0svDR5o/ZWpYocJ/dC1Cx/eI4tph+ohdJ3kAxMHU3AqQMhGKap/DNVdWL+PXRcU3Y46HMAwtGk33QktijsCsuahxE6KIf/t79Imhg0iOTinwD1exmSHBPJJM+bXDnO/IjVJCB6vu4zNNNwej+nZdFboWYDQH7B+kCnj81YslXLzgKd4BGskDLcjf/bqX7bKRvjfvSujednrhDP2wmA=
  on:
    all_branches: true
