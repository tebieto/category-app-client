dist: trusty
sudo: false
language: node_js
node_js:
- '8'
addons:
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
cache:
  directories:
  - "./node_modules"
install:
- npm install
before_script:
- npm update
- npm install -g @angular/cli
- ng build --prod --base-href=/category-app-client/
script:
- npm run test -- --watch=false --no-progress --browsers=ChromeHeadlessNoSandbox
- npm run ci-e2e
after_script:
- cat ./coverage/*/lcov.info | ./node_modules/coveralls/bin/coveralls.js
deploy:
  provider: heroku
  api_key:
    secure: 4Iiz0fLRw6LabVlkmnzhdMCpi/voWkH+7ZQaJnLvEjb2rkZ9j1kXpledo9tFhDwEciGM4KzfUzbrzXdmCJMdQPBChtMJVZBlf8PjTG2iF+ZiBPxcpb0OzbBMm0kOkzXOHLSyfqLv+PRNV2W7fXjU3DtTkQo/tc2o0vnM6bI90HeTVF203CDUCTfHkQ6mGNgLnuEDOA2cHIzGv+eiMvOLY0INXV4qct1DpICg1QjIrUIrLppgD/53jlDzBfom9s9M37mtcFtKv9vJ/Kq3JYaK9PhTupDz2I1TusRzLGvIm+g09J2mKrclN5Gy8fcPRbJRbTs5XNR7gMsIPrikDythe2qlHyARYP23ppS3Kbg49udrUdzc/bJclPTBnLezvmC5mGbd9zQ6aJJvwqCmuUKX8Y0PyEeqyxWvnlLK3aW54JYZAPOKojFJrzl1AKyNut1DT4XojVNo8asjCrZ9Bw/Sy2QSKUG9t8Dn4juvkcZcfLGUPPhgQ7TOHY2qZUeaDGII0m/piXw6nCd2h/7mwcp7LogF1D+HICnaxSwJgXEy2WIlpybfLErBAX225bDBhVOfDKOpEGCexhUf6QSSyAhCdxgAiz5cpJ1xT4HXwgaLRgNB7hi4xHY73jU2JZf9d3kz9IuFr50PNMhgxSLNcHOQQhGC3CWRGzuozDhPnq6XUpY=
  on:
    all_branches: true
